<!DOCTYPE html>
<html>
<head>
  <link href='https://fonts.googleapis.com/css?family=Roboto:400,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Roboto+Mono:300' rel='stylesheet' type='text/css'>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>commands</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
<link rel="stylesheet" href="https://skiadas.github.io/css/course.css" type="text/css" />

<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</head>
<body>
<section id="guide-to-r-commands" class="level1">
<h1>Guide to R Commands</h1>
<p>This list is meant to be used as a reference. Seeing all the commands at once can be overwhelming. You should follow the <a href="labs.html">labs</a> for a more smooth introduction to programming in R.</p>
<p>The main use of this guide is to find out the common options that can be added to these commands. Throughout the guide, sections enclosed in angle brackets like this: <code>&lt;dataset&gt;</code> are placeholders meant to be replaced by the appropriate text for your data.</p>
<ul>
<li><a href="#data-preparation">Data Preparation</a>
<ul>
<li><a href="#read-csv">read_csv</a></li>
<li><a href="#data">data</a></li>
<li><a href="#view">View</a></li>
<li><a href="#head-tail">head and tail</a></li>
<li><a href="#filter">filter</a></li>
</ul></li>
<li><a href="#summaries">Summaries</a>
<ul>
<li><a href="#the-formula-interface">The formula interface</a></li>
<li><a href="#piping">piping (%&gt;%)</a></li>
<li><a href="#summary">summary</a></li>
<li><a href="#tally">tally</a></li>
<li><a href="#aggregating-functions">aggregating functions (mean, median, sd, cor, var, favstats, range, iqr, sum, prod, min, max)</a></li>
</ul></li>
<li><a href="#plotting">Plotting</a>
<ul>
<li><a href="#common-graph-options">Common graph options</a></li>
<li><a href="#legend-specifications">Legend specifications</a></li>
<li><a href="#color-specifications">Color specifications</a></li>
<li><a href="#histogram">histogram</a></li>
<li><a href="#barchart">barchart</a></li>
</ul></li>
</ul>
<section id="data-preparation" class="level2">
<h2>Data Preparation</h2>
<p>Commands in this section involve data preparation, for instance loading new data or filtering a data set.</p>
<section id="read_csv" class="level3">
<h3><code>read_csv</code></h3>
<p><code>read_csv</code> is used for loading comma-separated-format (CSV) files. This is a popular format for transmitting data, and works well with spreadsheet programs like Excel. Excel can read CSV files and can also export/save to CSV format.</p>
<p>In RStudio you can use the <code>Import Dataset &gt; From CSV</code> menu option, and it will create the appropriate <code>read_csv</code> command for you.</p>
<section id="options" class="level4">
<h4>Options</h4>
<ul>
<li><code>file="..."</code> is the first option, and you can omit the <code>file=</code> part for it. The quoted expression specifies which file to load. If the file is online, all you need to use is the web link to the file. If it is on your computer, it should hopefully be in the “working directory”. In that case you just need to provide the filename.</li>
</ul>
<p>There are many other more specialized options, for situations when the initial dataset is not properly formatted. We will not discuss them here, but you can read more on the documentation page <code>?read_csv</code>.</p>
</section>
<section id="examples" class="level4">
<h4>Examples</h4>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># A local file:</span></a>
<a class="sourceLine" id="cb1-2" title="2">myData &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;myDatafile.csv&quot;</span>)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co"># A file from the internet</span></a>
<a class="sourceLine" id="cb1-4" title="4">myData &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;http://hanoverstatslabs.github.io/resources/datasets/driving.csv&quot;</span>)</a></code></pre></div>
</section>
</section>
<section id="data" class="level3">
<h3>data</h3>
<p><code>data</code> is used to load data that was saved in an R package. It is typically followed by the <a href="#view"><code>View</code></a> command.</p>
<p>If used with no arguments, as <code>data()</code>, it will list all datasets available in all loaded packages.</p>
<section id="options-1" class="level4">
<h4>Options</h4>
<p>The data command has a simple syntax. It expects simply the name of the dataset. The only option worth mentioning as an addition is <code>package="..."</code> where you can specify which package the data comes from. It is usually not needed.</p>
</section>
<section id="examples-1" class="level4">
<h4>Examples</h4>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># See all available datasets</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">data</span>()</a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co"># Load a dataset with a specific name</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="kw">data</span>(brfss)</a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co"># Load a dataset with a specific name</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="kw">data</span>(brfss, <span class="dt">package=</span><span class="st">&quot;hanoverbase&quot;</span>)</a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co"># Follow it with the `View` command</span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="kw">View</span>(brfss)</a></code></pre></div>
</section>
</section>
<section id="view" class="level3">
<h3>View</h3>
<p><code>View</code> is used to bring up a spreadsheet view of a dataset. The dataset must have been previously created, by <a href="#read_csv"><code>read_csv</code></a>, <a href="#data"><code>data</code></a> or some other method.</p>
<section id="examples-2" class="level4">
<h4>Examples</h4>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># First load a dataset</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">load</span>(brfss)</a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co"># Then view it</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="kw">View</span>(brfss)</a></code></pre></div>
</section>
</section>
<section id="head-tail" class="level3">
<h3>head, tail</h3>
<p><code>head</code> and <code>tail</code> can be used in order to extract the first few, or the last few, cases from a dataset. They can often be used as the last step in a piping sequence in order to see the top results from our operation.</p>
<p>Both functions take two arguments: The name of the object (often provided via piping) and the number of cases to show, which defaults to around 6.</p>
<section id="examples-3" class="level4">
<h4>Examples</h4>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># Show only the first few cases from the dataset</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">data</span>(brfss)</a>
<a class="sourceLine" id="cb4-3" title="3"><span class="kw">head</span>(brfss)</a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co"># Same thing using piping</span></a>
<a class="sourceLine" id="cb4-5" title="5">brfss <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co"># Showing 10 cases</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="kw">head</span>(brfss, <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb4-8" title="8">brfss <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co"># State populations, top 6</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="kw">data</span>(counties)</a>
<a class="sourceLine" id="cb4-11" title="11"><span class="kw">sum</span>(<span class="op">~</span>pop2010<span class="op">|</span>state, <span class="dt">data=</span>counties) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">sort</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tail</span>()</a></code></pre></div>
</section>
</section>
<section id="filter" class="level3">
<h3>filter</h3>
<p>TODO</p>
</section>
</section>
<section id="summaries" class="level2">
<h2>Summaries</h2>
<p>Commands in this section produce numerical summaries.</p>
<section id="the-formula-interface" class="level3">
<h3>The Formula Interface</h3>
<p>Most of the commands we are using expect the variables to be specified via a formula interface. A formula in general looks as follows:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="op">&lt;</span>lhs<span class="op">&gt;</span><span class="er">~&lt;</span>rhs<span class="op">&gt;</span><span class="er">|&lt;</span>groups<span class="op">&gt;</span></a></code></pre></div>
<p>Here the left-hand-side may be completely absent and the vertical line and <code>groups</code> part may also be absent. Both sides contain the variables to be considered, and multiple variables can be separated by a plus sign.</p>
<dl>
<dt>lhs</dt>
<dd>The variables on the left-hand-side are the target variables and we are interested in how they are influenced by the other variables. When doing a scatterplot, <code>lhs</code> corresponds to the y axis.
</dd>
<dt>rhs</dt>
<dd>The variables on the right-hand-side are the source variables and we are interested in themselves if there is no left-hand-side, or how they influence the variables in the left-hand-side if there are any.
</dd>
<dt>groups</dt>
<dd>The variables in the groups section are meant to be variables used to break down the results. If used in a graph situation for example, the graph would have a different panel for each value of the group variables.
</dd>
</dl>
<section id="examples-4" class="level4">
<h4>Examples</h4>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="co"># Looking at general health on its own</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="op">~</span>genhealth</a>
<a class="sourceLine" id="cb6-3" title="3"><span class="co"># Compare physical health against mental health,</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="co"># break down by general health category</span></a>
<a class="sourceLine" id="cb6-5" title="5">physhealth<span class="op">~</span>menthealth<span class="op">|</span>genhealth</a>
<a class="sourceLine" id="cb6-6" title="6"><span class="co"># Look at both physical health and mental health</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="op">~</span>physhealth<span class="op">+</span>menthhealth</a></code></pre></div>
</section>
</section>
<section id="piping" class="level3">
<h3>Piping</h3>
<p>The <strong>piping</strong> operatior, <code>%&gt;%</code>, is a very useful operator that allows us to simplify the writing of complex steps. The operator takes the value on its left side, and uses it as the first argument in the function on its right side. Here is one example:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">healthVsExercise &lt;-<span class="st"> </span><span class="kw">tally</span>(<span class="op">~</span>genhealth<span class="op">|</span>exerciseany, <span class="dt">data=</span>brfss)</a>
<a class="sourceLine" id="cb7-2" title="2">healthVsExercise <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">t</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">barchart</span>()</a></code></pre></div>
<p>The first line creates a new table, <code>healthVsExercise</code>, with the tallies. The second line takes that table, and feeds it into the <code>t</code> function, and then feeds the result into the <code>barchart</code> function. That line is exactly the same as the following much harder to read expression:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">barchart</span>(<span class="kw">t</span>(healthVsExercise))</a></code></pre></div>
</section>
<section id="summary" class="level3">
<h3><code>summary</code></h3>
<p><code>summary</code> can be used on the whole dataset, to get a quick overview of the various variables and their summaries.</p>
<section id="options-2" class="level4">
<h4>Options</h4>
<p>Typically you do not need to add any options to this method.</p>
<ul>
<li><code>digits</code>: You can control how many digits are shown by adding the <code>digits=...</code> option.</li>
<li><code>maxsum</code>: You can determine how many categories (including the missing values category) will show from factors by adding the <code>maxsum=...</code> option. The most frequent categories are shown first.</li>
</ul>
</section>
<section id="examples-5" class="level4">
<h4>Examples</h4>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">summary</span>(brfss, <span class="dt">digits=</span><span class="dv">3</span>, <span class="dt">maxsum=</span><span class="dv">6</span>)</a></code></pre></div>
</section>
</section>
<section id="tally" class="level3">
<h3><code>tally</code></h3>
<p><code>tally</code> is used to produce frequency tables and cross-tabulation tables for categorical variables. The first argument should be a formula involving the variables to use, and it should be followed by a <code>data=&lt;dataset&gt;</code> option specifying which dataset to use.</p>
<section id="options-3" class="level4">
<h4>Options</h4>
<p>By default <code>tally</code> will create a table of frequencies for the various combinations of values.</p>
<ul>
<li><code>sort</code>: You can specify <code>sort=TRUE</code> if you want to options to be sorted in order of frequency. By default they will be ordered in the order specified in the variable.</li>
<li><code>format</code>: By default <code>tally</code> will produce frequency counts. You can change that behavior with the <code>format</code> option. Most common values are <code>"count"</code> (the default), <code>"percent"</code>, <code>"proportion"</code> and <code>"data.frame"</code> (produces a dataset of the results, useful for further processing).</li>
<li><code>margins</code>: You can add the option <code>margins=TRUE</code> if you would like to see marginal probabilities (totals) added to the table.</li>
<li><code>useNA</code>: You can add <code>useNA="no"</code> to remove the missing values from the computations and the result.</li>
</ul>
</section>
<section id="examples-6" class="level4">
<h4>Examples</h4>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="co"># There is a higher percent of Very Good/Excellent health people amongst those</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="co"># that exercise vs those that do not.</span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="kw">tally</span>(<span class="op">~</span>genhealth<span class="op">|</span>exerciseany, <span class="dt">data=</span>brfss, <span class="dt">format=</span><span class="st">&quot;percent&quot;</span>, <span class="dt">useNA=</span><span class="st">&quot;no&quot;</span>)</a></code></pre></div>
</section>
</section>
<section id="aggregating-functions" class="level3">
<h3>Aggregating Functions</h3>
<p>There is a long list of commands that all follow a similar syntax, and all aggregate values of some variable, possibly broken down by other categorical variables. They all have the syntax:</p>
<pre><code>&lt;command&gt;(&lt;formula&gt;, ...options)</code></pre>
<p>The formula has the form <code>&lt;aggregatingVariable&gt;~&lt;breakDown1&gt;+&lt;breakDown2&gt;...</code> where the variable on the LHS is the scalar variable to be aggregated, and the variables in the RHS are the categorical variables by which to break the groups down.</p>
<p>The usual commands are:</p>
<ul>
<li><code>mean</code> for the variable’s mean</li>
<li><code>median</code> for the variable’s median</li>
<li><code>sd</code> for the standard deviation</li>
<li><code>var</code> for the variance (square of standard deviation)</li>
<li><code>iqr</code> for the interquartile range</li>
<li><code>favstats</code> for the five-number summary, mean, median and count</li>
<li><code>range</code> for the range of the values (maximum minus minimum)</li>
<li><code>max</code> for the maximum of the values</li>
<li><code>min</code> for the minimum of the values</li>
<li><code>sum</code> for the sum of the values</li>
<li><code>prod</code> for the product of the values</li>
</ul>
<section id="options-4" class="level4">
<h4>Options</h4>
<p>All commands accept the same options:</p>
<ul>
<li><code>data</code>: add <code>data=&lt;dataset&gt;</code> to specify the dataset to use</li>
<li><code>na.rm</code>: add <code>na.rm=TRUE</code> to remove the missing values before computing. Most of the functions above will simply return <code>NA</code>, representing missing value, if there are any missing values present and <code>na.rm=TRUE</code> was not added.</li>
</ul>
</section>
<section id="examples-7" class="level4">
<h4>Examples</h4>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="co"># Stats on number of days per month with physical/mental health problems,</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="co"># broken down by general health</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="kw">mean</span>(physhealth<span class="op">~</span>genhealth, <span class="dt">data=</span>brfss, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb12-4" title="4"><span class="kw">mean</span>(menthealth<span class="op">~</span>genhealth, <span class="dt">data=</span>brfss, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb12-5" title="5"><span class="kw">favstats</span>(menthealth<span class="op">~</span>genhealth, <span class="dt">data=</span>brfss, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb12-6" title="6"><span class="co"># Total state population by adding the county populations</span></a>
<a class="sourceLine" id="cb12-7" title="7"><span class="kw">sum</span>(pop2010<span class="op">~</span>state, <span class="dt">data=</span>counties, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb12-8" title="8"><span class="co"># Stats for percent of blacks in county, broken down by state</span></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="kw">favstats</span>(black<span class="op">~</span>state, <span class="dt">data=</span>counties, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)</a></code></pre></div>
</section>
</section>
</section>
<section id="plotting" class="level2">
<h2>Plotting</h2>
<p>Commands in this section produce graphical summaries. Before we look at individual commands, we discuss options common to most graphs.</p>
<section id="common-graph-options" class="level3">
<h3>Common Graph Options</h3>
<p>These options can be added to most graph commands:</p>
<ul>
<li><p><code>xlab="..."</code> specifies the label for the x axis.</p></li>
<li><p><code>ylab="..."</code> specifies the label for the y axis.</p></li>
<li><p><code>main="..."</code> specifies the main graph title, which appears at the top.</p></li>
<li><p><code>col=...</code> specifies what colors to use for the various elements. Look at the <a href="#color-specifications">Color Specifications</a> section for more details.</p></li>
<li><p><code>pch=...</code> can be used on graphs with points to choose what point-style to use. The options are summarized in this image:</p>
<figure>
<img src="images/symbols.png" alt="pch and lty options" /><figcaption>pch and lty options</figcaption>
</figure>
<p>The icons 21-25 can use a fill-in (background) color, via the <code>bg=...</code> command. Use <code>c(..., ...)</code> for multiple values.</p></li>
<li><p><code>lty=...</code> can be used on graphs with lines to choose the line style to use. The graph above shows the options for line types. Use <code>c(..., ...)</code> for multiple values.</p></li>
<li><p><code>lwd=...</code> can be used on graphs with lines to specify the thickness of the lines, 1 being the standard size. For instance <code>lwd=1.4</code> will draw the lines 40% thicker.</p></li>
<li><p><code>cex=...</code> can be used to change the size of the objects in the graph, 1 being the standard size. For instance <code>cex=1.2</code> will draw the objects 20% bigger.</p></li>
<li><p><code>xlim=c(a, b)</code> sets the range on the x axis to be from <code>a</code> to <code>b</code>.</p></li>
<li><p><code>ylim=c(a, b)</code> sets the range on the y axis to be from <code>a</code> to <code>b</code>.</p></li>
<li><p><code>auto.key</code> and <code>key</code>: These options are used for to add <a href="#legend-specifications">legends</a> to graphs that need them. For details look at the corresponding section.</p></li>
<li><p><code>layout</code>: TODO</p></li>
</ul>
</section>
<section id="legend-specifications" class="level3">
<h3>Legend Specifications</h3>
<p>Legends are needed when we use a grouping variable, to identify the different colors and symbols used. Adding a default legend is easy to do. However, customizing the legend and the graph in general becomes trickier.</p>
<p>To specify the legend you have two options you can add to graphs:</p>
<dl>
<dt>auto.key</dt>
<dd><p>The <code>auto.key</code> option is a convenient way to add a legend, but it will only work if you don’t set custom colors to your graph. Its form is <code>auto.key=list(...)</code> where the dotted area may be empty or contain any of the following options: - <code>space="..."</code> will specify which side the legend goes in (top, bottom, left, right). The default is top. - <code>columns=...</code> will specify in how many columns to split the legend. The default is one column, so all values form a single column.</p>
</dd>
<dt>key</dt>
<dd><p>The <code>key</code> option allows for more fine-tuned legends, but it is also more complex to write. This is definitely an advanced feature. With this option you have to manually specify everything that goes into the graph, including the various labels for the grouping variable. It would typically be constructed in steps, like in this example:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="co"># First we specify the colors we will use. We use 5 keys here.</span></a>
<a class="sourceLine" id="cb13-2" title="2">myColors &lt;-<span class="st"> </span><span class="kw">brewer.pal</span>(<span class="dv">5</span>, <span class="st">&quot;RdPu&quot;</span>)</a>
<a class="sourceLine" id="cb13-3" title="3"><span class="co"># Next we create the levels</span></a>
<a class="sourceLine" id="cb13-4" title="4">myLabels =<span class="st"> </span><span class="kw">list</span>(<span class="kw">levels</span>(brfss<span class="op">$</span>genhealth))</a>
<a class="sourceLine" id="cb13-5" title="5"><span class="co"># Now we create a list of key components. We use &quot;text&quot; to set the labels,</span></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="co"># &quot;columns&quot; to specify how many columns to show, and &quot;rectangles&quot; to</span></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="co"># tell the legend to draw colored rectangles with our colors in.</span></a>
<a class="sourceLine" id="cb13-8" title="8">myKey =<span class="st"> </span><span class="kw">list</span>(<span class="dt">text=</span>myLabels, <span class="dt">columns=</span><span class="dv">4</span>, <span class="dt">rectangles=</span><span class="kw">list</span>(<span class="dt">col=</span>myColors))</a>
<a class="sourceLine" id="cb13-9" title="9"><span class="co"># Finally, we use the key in a graph We must specify the colors again</span></a>
<a class="sourceLine" id="cb13-10" title="10">healthVsExercise &lt;-<span class="st"> </span><span class="kw">tally</span>(<span class="op">~</span>genhealth<span class="op">|</span>exerciseany, <span class="dt">data=</span>brfss, <span class="dt">format=</span><span class="st">&quot;percent&quot;</span>, <span class="dt">useNA=</span><span class="st">&quot;no&quot;</span>)</a>
<a class="sourceLine" id="cb13-11" title="11">healthVsExercise <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">t</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">barchart</span>(<span class="dt">col=</span>myColors, <span class="dt">key=</span>myKey)</a></code></pre></div>
<p>Instead of, or in addition to, <code>rectangles</code>, we could also use <code>lines</code> and <code>points</code> to add those symbols. You can use most of the <a href="#common-graph-options">common graph options</a> to specify these lines and symbols, just like we used <code>col</code> above.</p>
</dd>
</dl>
</section>
<section id="color-specifications" class="level3">
<h3>Color Specifications</h3>
<p>Graph colors can be specified in a variety of different ways. We outline these different ways here. They are to be used with the <code>col=...</code> graph option.</p>
<dl>
<dt>By name</dt>
<dd><p>R has over 650 built-in color names that you can use. Run the command <code>colors()</code> to see the different options. An example use would be: <code>col=c("grey5", "skyblue3")</code></p>
</dd>
<dt>By grayscale</dt>
<dd><p>You can specify a degree of grayness by using the <code>gray(...)</code> function and specifying numbers between 0 (black) to 1 (white). An example use for 4 colors would be: <code>col=grey(0, 0.2, 0.5, 0.8)</code></p>
</dd>
<dt>By palette</dt>
<dd><p>The <a href="http://colorbrewer2.org/">colorBrewer</a> library contains custom palettes designed for various uses. You can see all the different palettes and their names by using the command <code>display.brewer.all()</code>. They fall into three categories:</p>
<ul>
<li><em>sequential palettes</em>, starting from a fairly white color and getting progressively darker. Good for ordered categorical data.</li>
<li><em>diverging palettes</em>, with a middle neutral color and diverging in two directions. Good for ordered categorical data with a middle neutral value and negative/positive sides.</li>
<li><em>qualitative palettes</em>, with easy to distinguish colors, useful for nominal (unordered) categorical variables.</li>
</ul>
<p>In order to use a palette, you would use the command <code>brewer.pal(&lt;n&gt;, &lt;name&gt;)</code> where <code>&lt;n&gt;</code> is the number of colors to choose, and <code>&lt;name&gt;</code> is the palette’s name, in quotes. For instance to use four colors from the “Accent” palette we would do: <code>col=brewer.pal(4, "Accent")</code></p>
</dd>
</dl>
</section>
<section id="histogram" class="level3">
<h3><code>histogram</code></h3>
<p><code>histogram</code> is used to produce histograms. The typical syntax would use a formula <code>~&lt;variable&gt;</code> as the first argument, followed by a <code>data=&lt;dataset&gt;</code> option to specify the dataset to use.</p>
<p>You can also create multiple panels based on the values of a categorical variable, with a formula <code>~&lt;variable&gt;|&lt;factorVariable&gt;</code>.</p>
<section id="options-5" class="level4">
<h4>Options</h4>
<ul>
<li><code>breaks</code> can be used in two ways, but the simplest one is to set it equal to a single number, specifying the number of breakpoints to be used for the histogram bars.</li>
<li><code>type</code> must equal one of <code>"percent"</code>, <code>"count"</code> or <code>"density"</code> and determines what the heights of the bars correspond to:
<ul>
<li><code>"count"</code> means the height of each bar corresponds to the number of cases in that range. If you were to change the default type, this is probably what you would choose instead.</li>
<li><code>"percent"</code> (the default) means that the height of each bar corresponds to the percent of cases in that range.</li>
<li><code>"density"</code> means that the <em>area</em> of each bar corresponds to the percent of cases in that range.</li>
</ul></li>
</ul>
</section>
<section id="examples-8" class="level4">
<h4>Examples</h4>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">histogram</span>(<span class="op">~</span>black, <span class="dt">data=</span>counties, <span class="dt">breaks=</span><span class="dv">40</span>, <span class="dt">col=</span><span class="st">&quot;green&quot;</span>)</a>
<a class="sourceLine" id="cb14-2" title="2"><span class="kw">histogram</span>(<span class="op">~</span>physhealth<span class="op">|</span>genhealth, <span class="dt">data=</span>brfss)</a></code></pre></div>
</section>
</section>
<section id="barchart" class="level3">
<h3><code>barchart</code></h3>
<p><code>barchart</code> is used to produce bar charts. It is typically used by first doing a <code>tally</code> and then piping the result into <code>barchart</code>.</p>
<section id="options-6" class="level4">
<h4>Options</h4>
<ul>
<li><code>horizontal</code>: By default the bars will be horizontal. If you would prefer vertical bars, add the option <code>horizontal=FALSE</code>.</li>
<li><code>origin</code>: Barcharts should start at 0, but sometimes the default setting does not force that behavior. Set <code>origin=0</code> to achieve that.</li>
</ul>
</section>
<section id="examples-9" class="level4">
<h4>Examples</h4>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">tally</span>(<span class="op">~</span>genhealth, <span class="dt">data=</span>brfss) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">barchart</span>(<span class="dt">horizontal=</span><span class="ot">FALSE</span>)</a></code></pre></div>
</section>
<section id="stacked-bar-charts" class="level4">
<h4>100% Stacked Bar Charts</h4>
<p>100% stacked bar charts are somewhat tricky to make. We start with a <code>tally</code> with the two variables separated by a vertical line (not plus!), then set the format to <code>percent</code>. Before piping that into a barchart, however, we have to pipe it through the <code>t</code> command, which transposes columns and rows. The main syntax would look like this:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">tally</span>(<span class="op">~</span>genhealth<span class="op">|</span>exerciseany, <span class="dt">data=</span>brfss, <span class="dt">format=</span><span class="st">&quot;percent&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">t</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-2" title="2"><span class="st">    </span><span class="kw">barchart</span>(<span class="dt">auto.key=</span><span class="kw">list</span>(<span class="dt">space=</span><span class="st">&quot;right&quot;</span>))</a></code></pre></div>
<p>You may have to swap the two variables to get them in the desired order.</p>
<p>seq quantile Histogram: breaks (both forms),</p>
</section>
</section>
</section>
<section id="cleanup" class="level2">
<h2>Cleanup</h2>
<ul>
<li><p>bargraph (mosaic) MIGHT NOT NEED?</p></li>
<li><p>barchart (lattice) barchart better for Pareto charts…</p></li>
<li><p>mosaicplot (mosaic)</p></li>
<li><p>xyplot (lattice)</p></li>
<li><p>ladd (mosaic)</p></li>
<li><p>panel.abline (lattice)</p></li>
<li><p>…</p></li>
<li><p>tally (mosaic)</p></li>
<li><p>head, tail (base)</p></li>
<li><p>summary (base)</p></li>
<li><p>names (base) MIGHT NOT NEED</p></li>
<li><p>arrange (dplyr) MIGHT NOT NEED</p></li>
<li><p>favstats (mosaic)</p></li>
<li><p>sort (base)</p></li>
<li><p>%&gt;% (dplyr)</p></li>
<li><p>filter (dplyr)</p></li>
<li><p>tally(~state, data=counties) %&gt;% sort()</p></li>
<li><p>median et al from mosaic ( median(~pop2010|state, data=counties) )</p></li>
<li><p>View (rstudio)</p></li>
<li><p>pdist, xpnorm, xqnorm, xpbinom (mosaic) FOR VISUALIZING THEORETICAL DISTRIBUTIONS</p></li>
</ul>
</section>
</section>
</body>
</html>
